mutation {
  # [START build-a-discount.product-id-buys]
  discountAutomaticBxgyCreate(
    automaticBxgyDiscount: {
      title: "BXGY discount test"
      startsAt: "2022-01-01"
      endsAt: "2024-04-18T02:38:45Z"
      usesPerOrderLimit: "1"
      customerBuys: {
        value: { quantity: "1" }
        items: { products: { productsToAdd: ["gid://shopify/Product/1"] } }
        # [END build-a-discount.product-id-buys]
        # [START build-a-discount.product-id-buys-all]
        # items: all
        # [END build-a-discount.product-id-buys-all]
      }
      customerGets: {
        value: {
          discountOnQuantity: {
            quantity: "1"
            # [START build-a-discount.percentage]
            effect: { percentage: 1.00 }
            # [END build-a-discount.percentage]
          }
        }
        items: {
          # [START build-a-discount.product-id-gets]
          products: { productsToAdd: ["gid://shopify/Product/1"] }
          # [END build-a-discount.product-id-gets]
        }
        # [START build-a-discount.product-id-gets-all]
        # items: all
        # [END build-a-discount.product-id-gets-all]
      }
    }
  ) {
    userErrors {
      field
      message
      code
    }
    automaticDiscountNode {
      id
      automaticDiscount {
        ... on DiscountAutomaticBxgy {
          title
          summary
          status
        }
      }
    }
  }
}
