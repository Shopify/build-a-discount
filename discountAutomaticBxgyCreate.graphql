# [START build-a-discount.discount-automatic-bxgy-create]
mutation {
  discountAutomaticBxgyCreate(
    automaticBxgyDiscount: {
      title: "BXGY discount test"
      startsAt: "2022-01-01"
      endsAt: "2024-04-18T02:38:45Z"
      usesPerOrderLimit: "1"
      customerBuys: {
        # [START build-a-discount.quantity-or-amount]
        value: {
          quantity: "1"
        }
        # [END build-a-discount.quantity-or-amount]
        items: {
          # [START build-a-discount.product-id-buys]
          products: { productsToAdd: ["gid://shopify/Product/1"] }
          # [END build-a-discount.product-id-buys]
        }
      }
      customerGets: {
        value: {
          discountOnQuantity: {
            quantity: "1"
            effect: {
              # [START build-a-discount.percentage]
              percentage: 1.00
              # [END build-a-discount.percentage]
            }
          }
        }
        items: {
          products: {
            # [START build-a-discount.product-id-gets]
            productsToAdd: ["gid://shopify/Product/1"]
            # [END build-a-discount.product-id-gets]
          }
        }
      }
    }
  ) {
    userErrors {
      field
      message
      code
    }
    automaticDiscountNode {
      id
      automaticDiscount {
        ... on DiscountAutomaticBxgy {
          title
          summary
          status
        }
      }
    }
  }
}
# [END build-a-discount.discount-automatic-bxgy-create]
