# [START build-a-discount.update-bxgy-discount]
mutation {
  discountAutomaticBxgyUpdate(
    # [START build-a-discount.discount-automatic-node-id]
    id: "gid://shopify/DiscountAutomaticNode/3"
    # [END build-a-discount.discount-automatic-node-id]
    automaticBxgyDiscount: {
      title: "BXGY discount update test"
      customerBuys: {
        value: { quantity: "1" }
        items: {
          products: {
            # [START build-a-discount.add-product-id-buys]
            productsToAdd: [
              "gid://shopify/Product/2"
              "gid://shopify/Product/3"
            ]
            # [END build-a-discount.add-product-id-buys]
            # [START build-a-discount.remove-product-id-buys]
            productsToRemove: ["gid://shopify/Product/1"]
            # [END build-a-discount.remove-product-id-buys]
          }
        }
      }
      customerGets: {
        value: {
          discountOnQuantity: { quantity: "1", effect: { percentage: 1.00 } }
        }
        items: {
          products: {
            # [START build-a-discount.add-product-id-gets]
            productsToAdd: [
              "gid://shopify/Product/2"
              "gid://shopify/Product/3"
            ]
            # [END build-a-discount.add-product-id-gets]
            # [START build-a-discount.remove-product-id-gets]
            productsToRemove: ["gid://shopify/Product/1"]
            # [END build-a-discount.remove-product-id-gets]
          }
        }
      }
    }
  ) {
    userErrors {
      field
      message
      code
    }
    automaticDiscountNode {
      automaticDiscount {
        ... on DiscountAutomaticBxgy {
          title
          summary
          status
        }
      }
    }
  }
}
# [END build-a-discount.update-bxgy-discount]